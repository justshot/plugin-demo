import { Action, Dispatch } from "redux";
import { SyncClient } from "twilio-sync";
import { ITask, IWorker } from "../models";
export declare enum CallMonitoringStatus {
    none = 0,
    waiting = 1,
    monitoring = 2
}
export interface CallMonitoring {
    readonly status: CallMonitoringStatus;
    readonly taskSid?: string;
}
export interface SupervisorWorkerState {
    worker: IWorker;
    tasks: Array<ITask>;
}
export interface SupervisorState {
    readonly callMonitoring: CallMonitoring;
    readonly listener?: SupervisorWorkersListener;
    readonly stickyWorker?: SupervisorWorkerState;
    readonly workers?: Array<SupervisorWorkerState>;
}
export interface SupervisorStateAction extends Action {
    readonly payload?: any;
}
export declare const ACTION_UPDATE_STATE = "SUPERVISOR_UPDATE";
export declare const ACTION_MONITORING_SUCCEEDED = "SUPERVISOR_INCOMING_CALL";
export declare function reduce(state: SupervisorState, action: SupervisorStateAction): SupervisorState;
export declare class Actions {
    private static _dispatcher;
    private static stateUpdateThrottler;
    private static pendingStateUpdate;
    private static listenedConferences;
    private static callMonitoringStart;
    private static dispatchStateUpdate;
    static dispatcher: Dispatch<any>;
    static assignInsights(insightsClient: any): void;
    static monitorCall(task: ITask): void;
    private static manageConferenceListening;
    static updateStateWorkers(workers: Array<SupervisorWorkerState>): void;
    static updateStateStickyWorker(stickyWorker: SupervisorWorkerState): void;
    static setActiveFilterQuery(query: string, taskFilter: string): void;
    static setStickyWorkerSid(sid: string): void;
    static shutdown(): void;
}
export declare class SupervisorWorkersListener {
    private insightsClient;
    private workersLiveQuery;
    private stickyWorkerLiveQuery;
    private workerListeners;
    private activeFilterQuery;
    private stickyWorker;
    private stickyWorkerSid;
    private taskFilter;
    constructor(insightsClient: SyncClient);
    setActiveFilterQuery(query: string, taskFilter: string): void;
    setStickyWorkerSid(sid: string): void;
    initInsights(): void;
    unInit(): void;
    private updateCurrentWorkers;
    private onWorkerTasksChanged;
    private loadInitialWorkers;
    private onWorkerItemUpdated;
    private onWorkerItemRemoved;
    private initStickyWorker;
    private unInitStickyWorker;
    private loadInitialStickyWorker;
    private onStickyWorkerUpdate;
    private onStickyWorkerRemoved;
}
export declare class SupervisorStateHelper {
    static getTaskBySid(sid: string): ITask;
    static getWorkerBySid(sid: string): IWorker;
}
