# Changelog

## [Unreleased]

## 0.23.0

### Added
- Added support for predefined message inside chat widget (MessagingCanvas)
- Add `StackedBarChart`, `Legend`, `AggregatedDataTile`, `Link` component
- Add `hasHoverStyle` prop to `DataTable` to make the hover style optional.

### Changed
- Updated default styles of `DynamicFrom`

### Fixed
- Chat widget should not show "read" status for messages when the channel has just one member

## 0.22.0

### Added
- `ConnectingAnimation` component to display a generic loading dots animation
- `ConnectingAnimation` property to theme to set the ConnectingAnimation dots color
- `showAvailabilityIcon` property to Avatar component (`true` by default) to be able to turn drawing availability widget on and off
- `noStyling` property to Avatar component (`false` by default)

### Fixed
- Prop `minimumSecondPanelSize` is now properly used in `SplitContentContainer` when provided in pixels

## 0.21.1
### Fixed
- User could not write text in the middle of chat input anymore.
- Friendly name was not shown as message sender for other than members of the chat channel.
- Make sure to insert global Flex styles into the head of the document even if other styles are not there

## 0.21.0
### Changed
- Fixed a issue where now we can set values for multiple fields in preengagement form.

### Added
- `staticBackgroundBorderColor` property added to `theme.Progress.Circular` object.
This property defines the color of the background border of the loading spinner, when not animating.
- `animatingBackgroundBorderColor` property added to `theme.Progress.Circular` object.
This property defines the color of the background border of the loading spinner, when animating.
- `animatingForegroundBorderColor` property added to `theme.Progress.Circular` object.
This property defines the color of the foreground border of the loading spinner, when animating.

### Removed
- `circularProgressColor` property removed from `theme.colors` object.
- `borderColor` and `fadeColor` properties removed from `theme.Progress.Circular` object.

## 0.20.0
### Added

- `renderChildren` optional prop to `DynamicComponent`. Signature `(children: React.ReactNode[], align: string) => React.ReactNode[]`. This property is a callback that user
of `DynamicComponent` can use if they want to alter the children of the fragments before rendering. By default DynamicComponent builds the list of children into its fragments from default children, children added via programmability and children added to the component tree via JSX. If `renderChildren` is specified then prior to any of the fragments rendered this callback is called to allow user the chance to change what the final rendered result will be. For example user may still want to filter out some of the children, wrap them all in some wrapper or maybe create brand new React components instead. `children` notes the children about to be rendered, `align` notes the name of the fragment rendered, which unless user has specified custom fragments, can be either `start` or `end`.


- Support for promises to Actions framework.
Now, if a before-action listener returns a Promise, the Actions framework will wait for it to be resolved before completing the action.
This change is back-compatible, so a lister can still return return nothing.

````javascript
// Valid
Flex.Actions.addListener("beforeNavigateToView", (payload) => {
    payload.url = "test";
});

// Valid as well.
// NavigateToView action will wait for the returned promise to be resolved.
Flex.Actions.addListener("beforeNavigateToView", (payload) => new Promise(res => {
    asyncCall(() => {
        payload.url = "myPromise";
        res();
    });
}));
````

- Added character count indicator below text input when agent exceeds the limit.

### Changed

- Moved reset CSS to top of head to allow any custom CSS to override it.
- `SendMessage` action got optional `messageAttributes` property to its payload that, if specified, will be used as the equally named property of the Chat SDK `sendMessage` call.
- Fixed UI issues with Chat input when shift+enter is pressed.
- Fixed `selectItem` type in pre-engagement form by passing the missing value prop to `Select` and fixed the styles for the same.
- Fixed the container width of `DynamicFrom` for webchat forms.


## 0.19.0

### Changed

`baseNames` theme names changed

| Deprecated name | New Theme name |
| --------------- | -------------- |
| DarkTheme       | GreyDark       |
| MediumTheme     | GreyLight      |
| BlueMediumTheme | FlexLight      |
| BlueDarkTheme   | FlexDark       |

### Added
- Add optional `label` property to the `Tab` component. When provided, it will display a label into the `Tab` element. If the value matches a code in language strings array, the contents of the language string is used as template. Otherwise the value is used as just string. If `label` is not provided, `icon` property is considered and used.
- Add optional `alignment` property to `Tabs`. When provided, it will change the tabs alignment. Possible values are `left` or `center`. Default is `center`.

